# סקירת פרויקט – TutTiud

TutTiud היא פלטפורמת SaaS מרובת דיירים לארגוני בריאות ורווחה. המערכת מתעדת מפגשים מודרכים ומפגשי טיפול, תוך שמירה על הפרדה מלאה בין ארגונים שונים.

## אבני דרך שהושלמו

- שלד אפליקציה ב־React עם Vite, Tailwind CSS ו־shadcn/ui.
- לקוח Supabase מאופס באמצעות משתני סביבה.
- ממשק RTL מלא עם טקסטים בעברית עבור מסע הכניסה הראשוני.
- פרוביידרים לניהול התחברות והקשר ארגוני המוכנים להתחברות למסד הבקרה בעתיד.
- מחסומי ניתוב הדואגים להיכנס ולהגדיר ארגון לפני צפייה במסכים מוגנים.
- עמוד Setup Wizard אינטראקטיבי שקורא את מטא־הנתונים של הארגון ופונה תחילה לפונקציית `/api/setup-status` כדי לבדוק אם כבר נשמר מפתח TutTiud מוצפן. ארגונים שחזרו לתהליך רואים כרטיס "ברוכים השבים" וכפתור "אימות ההגדרה" שמפעיל את `/api/verify-tuttiud-setup`, בעוד ארגונים חדשים עוברים את **שלב 0** (חשיפת סכימת tuttiud, הרצת סקריפט גרסה 2.2, העתקת `APP_DEDICATED_KEY`) ואת **שלב 1** להזנת המפתח ושמירתו דרך `/api/store-tuttiud-app-key`. במקרה של כשל אימות האשף מציג רק את ההוראות להרצת הסקריפט, ולאחר מכן **שלב 2** מריץ את תהליך האתחול/דיאגנוסטיקה ומסמן את החיבור כ־`"connected"`.
- מסך בחירת הארגון קורא את `metadata.connections.tuttiud` ומפנה את המשתמש לאשף ההקמה עד שהסטטוס מסומן כ־`"connected"`, והאשף מעדכן את הערך אוטומטית לאחר השלמת כל הבדיקות בהצלחה.
- שכבת Backend-for-Frontend מאובטחת באמצעות Azure Functions: הפונקציות `/api/setup-status`, `/api/verify-tuttiud-setup` ו-`/api/store-tuttiud-app-key` מטפלות באשף ההקמה, ובנוסף קיימים שירותי תלמידים/מפגשים/גיבוי. כל הפונקציות דורשות הגדרת משתני סביבה ב-Function App (`SUPABASE_URL`, `SUPABASE_SERVICE_ROLE_KEY`, `APP_ORG_CREDENTIALS_ENCRYPTION_KEY`) כדי לפענח ולשמור מפתחות בצורה מאובטחת.
- מודולים חדשים בצד הלקוח: עמוד "התלמידים שלי" עם רענון וקריאה מהירה לתיעוד, עמוד יצירת תיעוד מפגש מודרך המתקשר עם ה־API המאובטח, עמוד גיבוי ייעודי למנהלים ודף נחיתה מעודכן המדגיש את תהליך ההגדרה.

## המשך עבודה מוצע

1. הרחבת חוויית המדריכים והמנהלים (לדוגמה: היסטוריית מפגשים, לוחות בקרה) תוך שימוש בשכבת ה-BFF.
2. חיבור נתונים נוספים ממסד הבקרה (Profiles, הזמנות) לצורך העשרת ההקשר הארגוני.
3. שדרוג אשף ההקמה – שמירת התקדמות, רישום אירועים ותזמוני Retry.
4. הוספת יכולות עריכה וניהול תלמידים/מפגשים קיימים.
5. הוספת בדיקות אוטומטיות ותהליכי CI.
